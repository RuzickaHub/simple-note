<!DOCTYPE html>
<html lang="cs" class="light">
<head>
  <meta charset="UTF-8" />
  <title>Minimal FS Viewer</title>
  <style>
    /* ---- Reset ---- */
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: sans-serif;
      display:grid;
      grid-template-columns: 260px 1fr;
      height:100vh;
      background: var(--bg);
      color: var(--text);
      transition: background .25s, color .25s;
    }

    /* ---- Light / Dark ---- */
    .light {
      --bg:#ffffff;
      --text:#222;
      --sidebar-bg:#f6f6f6;
      --active:#e0e0e0;
    }
    .dark {
      --bg:#0f0f0f;
      --text:#f1f1f1;
      --sidebar-bg:#181818;
      --active:#2a2a2a;
    }

    /* ---- Sidebar ---- */
    aside {
      background:var(--sidebar-bg);
      border-right:1px solid rgba(0,0,0,0.1);
      overflow-y:auto;
      padding:20px;
    }

    .tree {
      list-style:none;
      font-size:14px;
      user-select:none;
    }

    .tree-item {
      display:flex;
      align-items:center;
      gap:6px;
      padding:4px 6px;
      border-radius:6px;
      cursor:pointer;
      transition:background .15s;
    }
    .tree-item:hover {
      background:var(--active);
    }
    .active {
      background:var(--active);
      font-weight:600;
    }

    .children {
      margin-left:18px;
      display:none;
    }
    .open > .children {
      display:block;
    }

    /* ---- SVG ikony ultra minimal ---- */
    .icon { width:14px; height:14px; stroke:currentColor; }

    /* ---- Obsah ---- */
    main {
      padding:30px;
      overflow-y:auto;
    }

    /* ---- Dark mode toggle ---- */
    #modeToggle {
      position:absolute;
      bottom:20px;
      left:20px;
      padding:6px 12px;
      border-radius:6px;
      cursor:pointer;
      background: var(--active);
      border:none;
      font-size:13px;
    }

  </style>
</head>

<body>

  <!----------- SIDEBAR ----------->
  <aside>
    <ul id="treeRoot" class="tree"></ul>
    <button id="modeToggle">ðŸŒ— PÅ™epnout</button>
  </aside>

  <!----------- OBSAH ----------->
  <main id="content">Vyber souborâ€¦</main>

  <script>
    /* ---- MinimalistickÃ© SVG ikonky ---- */
    const ICON_FOLDER = `<svg class="icon" fill="none" stroke-width="2">
      <path d="M2 5h4l2 2h10v10H2z"/>
    </svg>`;
    const ICON_FOLDER_OPEN = `<svg class="icon" fill="none" stroke-width="2">
      <path d="M2 5h4l2 2h12v2l-2 8H2z"/>
    </svg>`;
    const ICON_FILE = `<svg class="icon" fill="none" stroke-width="2">
      <path d="M4 2h10l4 4v12H4z"/>
    </svg>`;

    /* ---- NaÄtenÃ­ FS z GitHub RAW ---- */
    const REPO = "RuzickaHub/simple-note";
    const API = `https://api.github.com/repos/${REPO}/contents`;

    async function loadTree(path = "") {
      const res = await fetch(`${API}/${path}`);
      return await res.json();
    }

    async function renderTree(path = "", rootEl) {
      const items = await loadTree(path);

      for (const item of items) {
        const el = document.createElement("li");
        el.className = "tree-item";

        // FOLDER
        if (item.type === "dir") {
          el.innerHTML = ICON_FOLDER + item.name;
          el.onclick = e => {
            e.stopPropagation();
            el.classList.toggle("open");
            const icon = el.querySelector("svg");
            icon.outerHTML = el.classList.contains("open") ? ICON_FOLDER_OPEN : ICON_FOLDER;
          };

          const children = document.createElement("ul");
          children.className = "children";
          el.appendChild(children);

          renderTree(item.path, children);
        }

        // FILE
        if (item.type === "file") {
          el.innerHTML = ICON_FILE + item.name;
          el.onclick = async e => {
            e.stopPropagation();
            setActive(el);
            const raw = await fetch(item.download_url).then(r => r.text());
            document.getElementById("content").textContent = raw;
          };
        }

        rootEl.appendChild(el);
      }
    }

    /* ---- AktivnÃ­ soubor highlight ---- */
    function setActive(el) {
      document.querySelectorAll(".tree-item").forEach(i => i.classList.remove("active"));
      el.classList.add("active");
    }

    /* ---- Dark Mode ---- */
    document.getElementById("modeToggle").onclick = () => {
      const html = document.documentElement;
      html.className = html.className === "light" ? "dark" : "light";
    };

    /* ---- Inicializace ---- */
    renderTree("", document.getElementById("treeRoot"));

  </script>

</body>
</html>
